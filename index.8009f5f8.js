function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};PIXI.TextStyle.prototype.toJSON=function(){const t={};for(const e in this)if(0===e.indexOf("_")){const n=e.slice(1);t[n]=this[n]}return t};class n{constructor(t){this.parent=t.attrs.parent,this.id=t.attrs.id,this.name=t.attrs.name}view(){return m("div",{class:"row"},m("label",{class:"col-xs-5",for:this.id,title:this.id},this.name),m("div",{class:"col-xs-7"},this.init()))}parse(t){return Array.isArray(t)?t=t.map((t=>this.parse(t))):/^-?\d+$/.test(t)?t=parseInt(t):/^-?\d*\.\d+$/.test(t)&&(t=parseFloat(t)),t}update(t){this.parent.style[this.id]=this.parse(t),this.parent.app.render()}init(){throw"override init"}}var i={};!function(){function t(t,e,n,i,r,o){return{tag:t,key:e,attrs:n,children:i,text:r,dom:o,domSize:void 0,state:void 0,_state:void 0,events:void 0,instance:void 0,skip:!1}}t.normalize=function(e){return Array.isArray(e)?t("[",void 0,void 0,t.normalizeChildren(e),void 0,void 0):null!=e&&"object"!=typeof e?t("#",void 0,void 0,!1===e?"":e,void 0,void 0):e},t.normalizeChildren=function(e){for(var n=0;n<e.length;n++)e[n]=t.normalize(e[n]);return e};var n=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,r={},o={}.hasOwnProperty;function a(t){for(var e in t)if(o.call(t,e))return!1;return!0}function s(t){for(var e,i="div",o=[],a={};e=n.exec(t);){var s=e[1],l=e[2];if(""===s&&""!==l)i=l;else if("#"===s)a.id=l;else if("."===s)o.push(l);else if("["===e[3][0]){var c=e[6];c&&(c=c.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===e[4]?o.push(c):a[e[4]]=""===c?c:c||!0}}return o.length>0&&(a.className=o.join(" ")),r[t]={tag:i,attrs:a}}function l(e,n,i){var r,s,l=!1,c=n.className||n.class;if(!a(e.attrs)&&!a(n)){var d={};for(var u in n)o.call(n,u)&&(d[u]=n[u]);n=d}for(var u in e.attrs)o.call(e.attrs,u)&&(n[u]=e.attrs[u]);for(var u in void 0!==c&&(void 0!==n.class&&(n.class=void 0,n.className=c),null!=e.attrs.className&&(n.className=e.attrs.className+" "+c)),n)if(o.call(n,u)&&"key"!==u){l=!0;break}return Array.isArray(i)&&1===i.length&&null!=i[0]&&"#"===i[0].tag?s=i[0].children:r=i,t(e.tag,n.key,l?n:void 0,r,s)}function c(e){var n,i=arguments[1],o=2;if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");if("string"==typeof e)var a=r[e]||s(e);if(null==i?i={}:("object"!=typeof i||null!=i.tag||Array.isArray(i))&&(i={},o=1),arguments.length===o+1)n=arguments[o],Array.isArray(n)||(n=[n]);else for(n=[];o<arguments.length;)n.push(arguments[o++]);var c=t.normalizeChildren(n);return"string"==typeof e?l(a,i,c):t(e,i.key,i,c)}c.trust=function(e){return null==e&&(e=""),t("<",void 0,void 0,e,void 0,void 0)},c.fragment=function(e,n){return t("[",e.key,e,t.normalizeChildren(n),void 0,void 0)};var d=c;if((u=function(t){if(!(this instanceof u))throw new Error("Promise must be called with `new`");if("function"!=typeof t)throw new TypeError("executor must be a function");var e=this,n=[],i=[],r=l(n,!0),o=l(i,!1),a=e._instance={resolvers:n,rejectors:i},s="function"==typeof setImmediate?setImmediate:setTimeout;function l(t,r){return function l(d){var u;try{if(!r||null==d||"object"!=typeof d&&"function"!=typeof d||"function"!=typeof(u=d.then))s((function(){r||0!==t.length||console.error("Possible unhandled promise rejection:",d);for(var e=0;e<t.length;e++)t[e](d);n.length=0,i.length=0,a.state=r,a.retry=function(){l(d)}}));else{if(d===e)throw new TypeError("Promise can't be resolved w/ itself");c(u.bind(d))}}catch(t){o(t)}}}function c(t){var e=0;function n(t){return function(n){e++>0||t(n)}}var i=n(o);try{t(n(r),i)}catch(t){i(t)}}c(t)}).prototype.then=function(t,e){var n,i,r=this._instance;function o(t,e,o,a){e.push((function(e){if("function"!=typeof t)o(e);else try{n(t(e))}catch(t){i&&i(t)}})),"function"==typeof r.retry&&a===r.state&&r.retry()}var a=new u((function(t,e){n=t,i=e}));return o(t,r.resolvers,n,!0),o(e,r.rejectors,i,!1),a},u.prototype.catch=function(t){return this.then(null,t)},u.resolve=function(t){return t instanceof u?t:new u((function(e){e(t)}))},u.reject=function(t){return new u((function(e,n){n(t)}))},u.all=function(t){return new u((function(e,n){var i=t.length,r=0,o=[];if(0===t.length)e([]);else for(var a=0;a<t.length;a++)!function(a){function s(t){r++,o[a]=t,r===i&&e(o)}null==t[a]||"object"!=typeof t[a]&&"function"!=typeof t[a]||"function"!=typeof t[a].then?s(t[a]):t[a].then(s,n)}(a)}))},u.race=function(t){return new u((function(e,n){for(var i=0;i<t.length;i++)t[i].then(e,n)}))},"undefined"!=typeof window){void 0===window.Promise&&(window.Promise=u);var u=window.Promise}else if(void 0!==e){void 0===e.Promise&&(e.Promise=u);u=e.Promise}var h=function(t){if("[object Object]"!==Object.prototype.toString.call(t))return"";var e=[];for(var n in t)i(n,t[n]);return e.join("&");function i(t,n){if(Array.isArray(n))for(var r=0;r<n.length;r++)i(t+"["+r+"]",n[r]);else if("[object Object]"===Object.prototype.toString.call(n))for(var r in n)i(t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}},p=new RegExp("^file://","i"),f=function(t,e){var n,i=0;function r(){var t=0;function e(){0==--t&&"function"==typeof n&&n()}return function n(i){var r=i.then;return i.then=function(){t++;var o=r.apply(i,arguments);return o.then(e,(function(n){if(e(),0===t)throw n})),n(o)},i}}function o(t,e){if("string"==typeof t){var n=t;null==(t=e||{}).url&&(t.url=n)}return t}function a(t,e){if(null==e)return t;for(var n=t.match(/:[^\/]+/gi)||[],i=0;i<n.length;i++){var r=n[i].slice(1);null!=e[r]&&(t=t.replace(n[i],e[r]))}return t}function s(t,e){var n=h(e);if(""!==n){var i=t.indexOf("?")<0?"?":"&";t+=i+n}return t}function l(t){try{return""!==t?JSON.parse(t):null}catch(e){throw new Error(t)}}function c(t){return t.responseText}function d(t,e){if("function"==typeof t){if(!Array.isArray(e))return new t(e);for(var n=0;n<e.length;n++)e[n]=new t(e[n])}return e}return{request:function(n,i){var u=r();n=o(n,i);var h=new e((function(e,i){null==n.method&&(n.method="GET"),n.method=n.method.toUpperCase();var r="GET"!==n.method&&"TRACE"!==n.method&&("boolean"!=typeof n.useBody||n.useBody);"function"!=typeof n.serialize&&(n.serialize="undefined"!=typeof FormData&&n.data instanceof FormData?function(t){return t}:JSON.stringify),"function"!=typeof n.deserialize&&(n.deserialize=l),"function"!=typeof n.extract&&(n.extract=c),n.url=a(n.url,n.data),r?n.data=n.serialize(n.data):n.url=s(n.url,n.data);var o=new t.XMLHttpRequest,u=!1,h=o.abort;for(var f in o.abort=function(){u=!0,h.call(o)},o.open(n.method,n.url,"boolean"!=typeof n.async||n.async,"string"==typeof n.user?n.user:void 0,"string"==typeof n.password?n.password:void 0),n.serialize!==JSON.stringify||!r||n.headers&&n.headers.hasOwnProperty("Content-Type")||o.setRequestHeader("Content-Type","application/json; charset=utf-8"),n.deserialize!==l||n.headers&&n.headers.hasOwnProperty("Accept")||o.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(o.withCredentials=n.withCredentials),n.headers)({}).hasOwnProperty.call(n.headers,f)&&o.setRequestHeader(f,n.headers[f]);"function"==typeof n.config&&(o=n.config(o,n)||o),o.onreadystatechange=function(){if(!u&&4===o.readyState)try{var t=n.extract!==c?n.extract(o,n):n.deserialize(n.extract(o,n));if(o.status>=200&&o.status<300||304===o.status||p.test(n.url))e(d(n.type,t));else{var r=new Error(o.responseText);for(var a in t)r[a]=t[a];i(r)}}catch(t){i(t)}},r&&null!=n.data?o.send(n.data):o.send()}));return!0===n.background?h:u(h)},jsonp:function(n,l){var c=r();n=o(n,l);var u=new e((function(e,r){var o=n.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+i++,l=t.document.createElement("script");t[o]=function(i){l.parentNode.removeChild(l),e(d(n.type,i)),delete t[o]},l.onerror=function(){l.parentNode.removeChild(l),r(new Error("JSONP request failed")),delete t[o]},null==n.data&&(n.data={}),n.url=a(n.url,n.data),n.data[n.callbackKey||"callback"]=o,l.src=s(n.url,n.data),t.document.documentElement.appendChild(l)}));return!0===n.background?u:c(u)},setCompletionCallback:function(t){n=t}}}(window,u),m=function(e){var n,i=e.document,r=i.createDocumentFragment(),o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function a(t){return t.attrs&&t.attrs.xmlns||o[t.tag]}function s(){try{return i.activeElement}catch(t){return null}}function l(t,e,n,i,r,o,a){for(var s=n;s<i;s++){var l=e[s];null!=l&&c(t,l,r,a,o)}}function c(e,n,o,s,h){var p=n.tag;if("string"!=typeof p)return function(t,e,n,i,o){if(u(e,n),null!=e.instance){var a=c(t,e.instance,n,i,o);return e.dom=e.instance.dom,e.domSize=null!=e.dom?e.instance.domSize:0,g(t,a,o),a}return e.domSize=0,r}(e,n,o,s,h);switch(n.state={},null!=n.attrs&&A(n.attrs,n,o),p){case"#":return function(t,e,n){return e.dom=i.createTextNode(e.children),g(t,e.dom,n),e.dom}(e,n,h);case"<":return d(e,n,h);case"[":return function(t,e,n,r,o){var a=i.createDocumentFragment();if(null!=e.children){var s=e.children;l(a,s,0,s.length,n,null,r)}return e.dom=a.firstChild,e.domSize=a.childNodes.length,g(t,a,o),a}(e,n,o,s,h);default:return function(e,n,r,o,s){var c=n.tag,d=n.attrs,u=d&&d.is,h=(o=a(n)||o)?u?i.createElementNS(o,c,{is:u}):i.createElementNS(o,c):u?i.createElement(c,{is:u}):i.createElement(c);n.dom=h,null!=d&&function(t,e,n){for(var i in e)k(t,i,null,e[i],n)}(n,d,o);if(g(e,h,s),null!=n.attrs&&null!=n.attrs.contenteditable)y(n);else if(null!=n.text&&(""!==n.text?h.textContent=n.text:n.children=[t("#",void 0,void 0,n.text,void 0,void 0)]),null!=n.children){var p=n.children;l(h,p,0,p.length,r,null,o),function(t){var e=t.attrs;"select"===t.tag&&null!=e&&("value"in e&&k(t,"value",null,e.value,void 0),"selectedIndex"in e&&k(t,"selectedIndex",null,e.selectedIndex,void 0))}(n)}return h}(e,n,o,s,h)}}function d(t,e,n){var r={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(e.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div",o=i.createElement(r);o.innerHTML=e.children,e.dom=o.firstChild,e.domSize=o.childNodes.length;for(var a,s=i.createDocumentFragment();a=o.firstChild;)s.appendChild(a);return g(t,s,n),s}function u(e,n){var i;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(i=e.state.view).$$reentrantLock$$)return r;i.$$reentrantLock$$=!0}else{if(e.state=void 0,null!=(i=e.tag).$$reentrantLock$$)return r;i.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}if(e._state=e.state,null!=e.attrs&&A(e.attrs,e,n),A(e._state,e,n),e.instance=t.normalize(e._state.view.call(e.state,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");i.$$reentrantLock$$=null}function h(t,e,n,i,r,o,a){if(e!==n&&(null!=e||null!=n))if(null==e)l(t,n,0,n.length,r,o,a);else if(null==n)b(e,0,e.length,n);else{if(e.length===n.length){for(var s=!1,d=0;d<n.length;d++)if(null!=n[d]&&null!=e[d]){s=null==n[d].key&&null==e[d].key;break}if(s){for(d=0;d<e.length;d++)e[d]!==n[d]&&(null==e[d]&&null!=n[d]?c(t,n[d],r,a,v(e,d+1,o)):null==n[d]?b(e,d,d+1,n):p(t,e[d],n[d],r,v(e,d+1,o),i,a));return}}if(i=i||function(t,e){if(null!=t.pool&&Math.abs(t.pool.length-e.length)<=Math.abs(t.length-e.length)){var n=t[0]&&t[0].children&&t[0].children.length||0,i=t.pool[0]&&t.pool[0].children&&t.pool[0].children.length||0,r=e[0]&&e[0].children&&e[0].children.length||0;if(Math.abs(i-r)<=Math.abs(n-r))return!0}return!1}(e,n),i){var u=e.pool;e=e.concat(e.pool)}for(var h,y=0,w=0,x=e.length-1,S=n.length-1;x>=y&&S>=w;){if((I=e[y])!==(T=n[w])||i)if(null==I)y++;else if(null==T)w++;else if(I.key===T.key){var k=null!=u&&y>=e.length-u.length||null==u&&i;w++,p(t,I,T,r,v(e,++y,o),k,a),i&&I.tag===T.tag&&g(t,m(I),o)}else{if((I=e[x])!==T||i)if(null==I)x--;else if(null==T)w++;else{if(I.key!==T.key)break;k=null!=u&&x>=e.length-u.length||null==u&&i;p(t,I,T,r,v(e,x+1,o),k,a),(i||w<S)&&g(t,m(I),v(e,y,o)),x--,w++}else x--,w++}else y++,w++}for(;x>=y&&S>=w;){var I,T;if((I=e[x])!==(T=n[S])||i)if(null==I)x--;else if(null==T)S--;else if(I.key===T.key){k=null!=u&&x>=e.length-u.length||null==u&&i;p(t,I,T,r,v(e,x+1,o),k,a),i&&I.tag===T.tag&&g(t,m(I),o),null!=I.dom&&(o=I.dom),x--,S--}else{if(h||(h=f(e,x)),null!=T){var A=h[T.key];if(null!=A){var N=e[A];k=null!=u&&A>=e.length-u.length||null==u&&i;p(t,N,T,r,v(e,x+1,o),i,a),g(t,m(N),o),e[A].skip=!0,null!=N.dom&&(o=N.dom)}else{o=c(t,T,r,a,o)}}S--}else x--,S--;if(S<w)break}l(t,n,w,S+1,r,o,a),b(e,y,x+1,n)}}function p(e,n,i,r,o,s,l){var f=n.tag;if(f===i.tag){if(i.state=n.state,i._state=n._state,i.events=n.events,!s&&function(t,e){var n,i;null!=t.attrs&&"function"==typeof t.attrs.onbeforeupdate&&(n=t.attrs.onbeforeupdate.call(t.state,t,e));"string"!=typeof t.tag&&"function"==typeof t._state.onbeforeupdate&&(i=t._state.onbeforeupdate.call(t.state,t,e));if(!(void 0===n&&void 0===i||n||i))return t.dom=e.dom,t.domSize=e.domSize,t.instance=e.instance,!0;return!1}(i,n))return;if("string"==typeof f)switch(null!=i.attrs&&(s?(i.state={},A(i.attrs,i,r)):N(i.attrs,i,r)),f){case"#":!function(t,e){t.children.toString()!==e.children.toString()&&(t.dom.nodeValue=e.children);e.dom=t.dom}(n,i);break;case"<":!function(t,e,n,i){e.children!==n.children?(m(e),d(t,n,i)):(n.dom=e.dom,n.domSize=e.domSize)}(e,n,i,o);break;case"[":!function(t,e,n,i,r,o,a){h(t,e.children,n.children,i,r,o,a);var s=0,l=n.children;if(n.dom=null,null!=l){for(var c=0;c<l.length;c++){var d=l[c];null!=d&&null!=d.dom&&(null==n.dom&&(n.dom=d.dom),s+=d.domSize||1)}1!==s&&(n.domSize=s)}}(e,n,i,s,r,o,l);break;default:!function(e,n,i,r,o){var s=n.dom=e.dom;o=a(n)||o,"textarea"===n.tag&&(null==n.attrs&&(n.attrs={}),null!=n.text&&(n.attrs.value=n.text,n.text=void 0));(function(t,e,n,i){if(null!=n)for(var r in n)k(t,r,e&&e[r],n[r],i);if(null!=e)for(var r in e)null!=n&&r in n||("className"===r&&(r="class"),"o"!==r[0]||"n"!==r[1]||I(r)?"key"!==r&&t.dom.removeAttribute(r):T(t,r,void 0))})(n,e.attrs,n.attrs,o),null!=n.attrs&&null!=n.attrs.contenteditable?y(n):null!=e.text&&null!=n.text&&""!==n.text?e.text.toString()!==n.text.toString()&&(e.dom.firstChild.nodeValue=n.text):(null!=e.text&&(e.children=[t("#",void 0,void 0,e.text,void 0,e.dom.firstChild)]),null!=n.text&&(n.children=[t("#",void 0,void 0,n.text,void 0,void 0)]),h(s,e.children,n.children,i,r,null,o))}(n,i,s,r,l)}else!function(e,n,i,r,o,a,s){if(a)u(i,r);else{if(i.instance=t.normalize(i._state.view.call(i.state,i)),i.instance===i)throw Error("A view cannot return the vnode it received as argument");null!=i.attrs&&N(i.attrs,i,r),N(i._state,i,r)}null!=i.instance?(null==n.instance?c(e,i.instance,r,s,o):p(e,n.instance,i.instance,r,o,a,s),i.dom=i.instance.dom,i.domSize=i.instance.domSize):null!=n.instance?(w(n.instance,null),i.dom=void 0,i.domSize=0):(i.dom=n.dom,i.domSize=n.domSize)}(e,n,i,r,o,s,l)}else w(n,null),c(e,i,r,l,o)}function f(t,e){var n={},i=0;for(i=0;i<e;i++){var r=t[i];if(null!=r){var o=r.key;null!=o&&(n[o]=i)}}return n}function m(t){var e=t.domSize;if(null!=e||null==t.dom){var n=i.createDocumentFragment();if(e>0){for(var r=t.dom;--e;)n.appendChild(r.nextSibling);n.insertBefore(r,n.firstChild)}return n}return t.dom}function v(t,e,n){for(;e<t.length;e++)if(null!=t[e]&&null!=t[e].dom)return t[e].dom;return n}function g(t,e,n){n&&n.parentNode?t.insertBefore(e,n):t.appendChild(e)}function y(t){var e=t.children;if(null!=e&&1===e.length&&"<"===e[0].tag){var n=e[0].children;t.dom.innerHTML!==n&&(t.dom.innerHTML=n)}else if(null!=t.text||null!=e&&0!==e.length)throw new Error("Child node of a contenteditable must be trusted")}function b(t,e,n,i){for(var r=e;r<n;r++){var o=t[r];null!=o&&(o.skip?o.skip=!1:w(o,i))}}function w(t,e){var n,i=1,r=0;t.attrs&&"function"==typeof t.attrs.onbeforeremove&&(null!=(n=t.attrs.onbeforeremove.call(t.state,t))&&"function"==typeof n.then&&(i++,n.then(o,o)));"string"!=typeof t.tag&&"function"==typeof t._state.onbeforeremove&&(null!=(n=t._state.onbeforeremove.call(t.state,t))&&"function"==typeof n.then&&(i++,n.then(o,o)));function o(){if(++r===i&&(S(t),t.dom)){var n=t.domSize||1;if(n>1)for(var o=t.dom;--n;)x(o.nextSibling);x(t.dom),null==e||null!=t.domSize||null!=(a=t.attrs)&&(a.oncreate||a.onupdate||a.onbeforeremove||a.onremove)||"string"!=typeof t.tag||(e.pool?e.pool.push(t):e.pool=[t])}var a}o()}function x(t){var e=t.parentNode;null!=e&&e.removeChild(t)}function S(t){if(t.attrs&&"function"==typeof t.attrs.onremove&&t.attrs.onremove.call(t.state,t),"string"!=typeof t.tag)"function"==typeof t._state.onremove&&t._state.onremove.call(t.state,t),null!=t.instance&&S(t.instance);else{var e=t.children;if(Array.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];null!=i&&S(i)}}}function k(t,e,n,i,r){var o=t.dom;if("key"!==e&&"is"!==e&&(n!==i||function(t,e){return"value"===e||"checked"===e||"selectedIndex"===e||"selected"===e&&t.dom===s()}(t,e)||"object"==typeof i)&&void 0!==i&&!I(e)){var a,l=e.indexOf(":");if(l>-1&&"xlink"===e.substr(0,l))o.setAttributeNS("http://www.w3.org/1999/xlink",e.slice(l+1),i);else if("o"===e[0]&&"n"===e[1]&&"function"==typeof i)T(t,e,i);else if("style"===e)!function(t,e,n){e===n&&(t.style.cssText="",e=null);if(null==n)t.style.cssText="";else if("string"==typeof n)t.style.cssText=n;else{for(var i in"string"==typeof e&&(t.style.cssText=""),n)t.style[i]=n[i];if(null!=e&&"string"!=typeof e)for(var i in e)i in n||(t.style[i]="")}}(o,n,i);else if(e in o&&("href"!==(a=e)&&"list"!==a&&"form"!==a&&"width"!==a&&"height"!==a)&&void 0===r&&!function(t){return t.attrs.is||t.tag.indexOf("-")>-1}(t)){if("value"===e){var c=""+i;if(("input"===t.tag||"textarea"===t.tag)&&t.dom.value===c&&t.dom===s())return;if("select"===t.tag)if(null===i){if(-1===t.dom.selectedIndex&&t.dom===s())return}else if(null!==n&&t.dom.value===c&&t.dom===s())return;if("option"===t.tag&&null!=n&&t.dom.value===c)return}if("input"===t.tag&&"type"===e)return void o.setAttribute(e,i);o[e]=i}else"boolean"==typeof i?i?o.setAttribute(e,""):o.removeAttribute(e):o.setAttribute("className"===e?"class":e,i)}}function I(t){return"oninit"===t||"oncreate"===t||"onupdate"===t||"onremove"===t||"onbeforeremove"===t||"onbeforeupdate"===t}function T(t,e,i){var r=t.dom,o="function"!=typeof n?i:function(t){var e=i.call(r,t);return n.call(r,t),e};if(e in r)r[e]="function"==typeof i?o:null;else{var a=e.slice(2);if(void 0===t.events&&(t.events={}),t.events[e]===o)return;null!=t.events[e]&&r.removeEventListener(a,t.events[e],!1),"function"==typeof i&&(t.events[e]=o,r.addEventListener(a,t.events[e],!1))}}function A(t,e,n){"function"==typeof t.oninit&&t.oninit.call(e.state,e),"function"==typeof t.oncreate&&n.push(t.oncreate.bind(e.state,e))}function N(t,e,n){"function"==typeof t.onupdate&&n.push(t.onupdate.bind(e.state,e))}return{render:function(e,n){if(!e)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var i=[],r=s(),o=e.namespaceURI;null==e.vnodes&&(e.textContent=""),Array.isArray(n)||(n=[n]),h(e,e.vnodes,t.normalizeChildren(n),!1,i,null,"http://www.w3.org/1999/xhtml"===o?void 0:o),e.vnodes=n,null!=r&&s()!==r&&r.focus();for(var a=0;a<i.length;a++)i[a]()},setEventCallback:function(t){return n=t}}};var v=function(t){var e=m(t);e.setEventCallback((function(t){!1===t.redraw?t.redraw=void 0:r()}));var n=[];function i(t){var e=n.indexOf(t);e>-1&&n.splice(e,2)}function r(){for(var t=1;t<n.length;t+=2)n[t]()}return{subscribe:function(t,e){i(t),n.push(t,function(t){var e=0,n=null,i="function"==typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var r=Date.now();0===e||r-e>=16?(e=r,t()):null===n&&(n=i((function(){n=null,t(),e=Date.now()}),16-(r-e)))}}(e))},unsubscribe:i,redraw:r,render:e.render}}(window);f.setCompletionCallback(v.redraw);var g;d.mount=(g=v,function(e,n){if(null===n)return g.render(e,[]),void g.unsubscribe(e);if(null==n.view&&"function"!=typeof n)throw new Error("m.mount(element, component) expects a component, not a vnode");g.subscribe(e,(function(){g.render(e,t(n))})),g.redraw()});var y=u,b=function(t){if(""===t||null==t)return{};"?"===t.charAt(0)&&(t=t.slice(1));for(var e=t.split("&"),n={},i={},r=0;r<e.length;r++){var o=e[r].split("="),a=decodeURIComponent(o[0]),s=2===o.length?decodeURIComponent(o[1]):"";"true"===s?s=!0:"false"===s&&(s=!1);var l=a.split(/\]\[?|\[/),c=i;a.indexOf("[")>-1&&l.pop();for(var d=0;d<l.length;d++){var u=l[d],h=l[d+1],p=""==h||!isNaN(parseInt(h,10));if(""===u)null==n[a=l.slice(0,d).join()]&&(n[a]=Array.isArray(c)?c.length:0),u=n[a]++;else if("__proto__"===u)break;if(d===l.length-1)c[u]=s;else{var f=Object.getOwnPropertyDescriptor(c,u);null!=f&&(f=f.value),null==f&&(c[u]=f=p?[]:{}),c=f}}}return i},w=function(t){var e,n="function"==typeof t.history.pushState,i="function"==typeof setImmediate?setImmediate:setTimeout;function r(e){var n=t.location[e].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);return"pathname"===e&&"/"!==n[0]&&(n="/"+n),n}function o(t,e,n){var i=t.indexOf("?"),r=t.indexOf("#"),o=i>-1?i:r>-1?r:t.length;if(i>-1){var a=r>-1?r:t.length,s=b(t.slice(i+1,a));for(var l in s)e[l]=s[l]}if(r>-1){var c=b(t.slice(r+1));for(var l in c)n[l]=c[l]}return t.slice(0,o)}var a={prefix:"#!",getPath:function(){switch(a.prefix.charAt(0)){case"#":return r("hash").slice(a.prefix.length);case"?":return r("search").slice(a.prefix.length)+r("hash");default:return r("pathname").slice(a.prefix.length)+r("search")+r("hash")}},setPath:function(e,i,r){var s={},l={};if(e=o(e,s,l),null!=i){for(var c in i)s[c]=i[c];e=e.replace(/:([^\/]+)/g,(function(t,e){return delete s[e],i[e]}))}var d=h(s);d&&(e+="?"+d);var u=h(l);if(u&&(e+="#"+u),n){var p=r?r.state:null,f=r?r.title:null;t.onpopstate(),r&&r.replace?t.history.replaceState(p,f,a.prefix+e):t.history.pushState(p,f,a.prefix+e)}else t.location.href=a.prefix+e}};return a.defineRoutes=function(r,s,l){function c(){var e=a.getPath(),n={},i=o(e,n,n),c=t.history.state;if(null!=c)for(var d in c)n[d]=c[d];for(var u in r){var h=new RegExp("^"+u.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(h.test(i))return void i.replace(h,(function(){for(var t=u.match(/:[^\/]+/g)||[],i=[].slice.call(arguments,1,-2),o=0;o<t.length;o++)n[t[o].replace(/:|\./g,"")]=decodeURIComponent(i[o]);s(r[u],n,e,u)}))}l(e,n)}var d;n?t.onpopstate=(d=c,function(){null==e&&(e=i((function(){e=null,d()})))}):"#"===a.prefix.charAt(0)&&(t.onhashchange=c),c()},a};d.route=function(e,n){var i,r,o,a,s,l=w(e),c=function(t){return t},d=function(e,d,u){if(null==e)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var h=function(){null!=i&&n.render(e,i(t(r,o.key,o)))},p=function(t){if(t===d)throw new Error("Could not resolve default route "+d);l.setPath(d,null,{replace:!0})};l.defineRoutes(u,(function(t,e,n){var l=s=function(t,d){l===s&&(r=null==d||"function"!=typeof d.view&&"function"!=typeof d?"div":d,o=e,a=n,s=null,i=(t.render||c).bind(t),h())};t.view||"function"==typeof t?l({},t):t.onmatch?y.resolve(t.onmatch(e,n)).then((function(e){l(t,e)}),p):l(t,"div")}),p),n.subscribe(e,h)};return d.set=function(t,e,n){null!=s&&((n=n||{}).replace=!0),s=null,l.setPath(t,e,n)},d.get=function(){return a},d.prefix=function(t){l.prefix=t},d.link=function(t){t.dom.setAttribute("href",l.prefix+t.attrs.href),t.dom.onclick=function(t){if(!(t.ctrlKey||t.metaKey||t.shiftKey||2===t.which)){t.preventDefault(),t.redraw=!1;var e=this.getAttribute("href");0===e.indexOf(l.prefix)&&(e=e.slice(l.prefix.length)),d.set(e,void 0,void 0)}}},d.param=function(t){return void 0!==o&&void 0!==t?o[t]:o},d}(window,v),d.withAttr=function(t,e,n){return function(i){e.call(n||this,t in i.currentTarget?i.currentTarget[t]:i.currentTarget.getAttribute(t))}};var x=m(window);d.render=x.render,d.redraw=v.redraw,d.request=f.request,d.jsonp=f.jsonp,d.parseQueryString=b,d.buildQueryString=h,d.version="1.1.7",d.vnode=t,i=d}();class r extends n{init(){const e=t(i).withAttr("value",(t=>{this.parent.background=t,this.parent.app.render()}));return t(i)("input",{class:"form-control input-sm color",type:"color",id:this.id,key:this.id,value:this.parent.background,oninput:e})}}class o extends n{init(){return t(i)("input",{type:"checkbox",class:"check",id:this.id,key:this.id,onchange:t(i).withAttr("checked",this.update,this),checked:this.parent.style[this.id]})}}class a extends n{constructor(t){super(t),this.colorMap={"#000":"black","#fff":"white","#c0c0c0":"silver","#f00":"red","#800000":"maroon","#ff0":"yellow","#808000":"olive","#0f0":"lime","#008000":"green","#0ff":"aqua","#008080":"teal","#00f":"blue","#000080":"navy","#f0f":"fuchsia","#800080":"purple"},this.stringMap={},Object.keys(this.colorMap).forEach((t=>{this.stringMap[this.colorMap[t]]=t}))}init(){const e=t(i).withAttr("value",(t=>{this.update(this.hexToString(t))}));return t(i)("input",{class:"form-control input-sm color color-group",type:"color",id:this.id,key:this.id,oninput:e,value:this.stringToHex(this.parent.style[this.id])})}stringToHex(t){let e=this.stringMap[t]||t;return e=e.replace(/^#([a-f0-9])([a-f0-9])([a-f0-9])$/,"#$1$1$2$2$3$3"),e}hexToString(t){const e=t.replace(/([a-f0-9])\1([a-f0-9])\2([a-f0-9])\3/,"$1$2$3");return this.colorMap[e]||e}}class s extends a{init(){const e=this.parent.style[this.id];let n;return n=Array.isArray(e)?e.map(((n,r)=>{let o=[t(i)("button",{class:"btn btn-sm btn-default",key:this.id+"Remove"+r,onclick:this.removeStop.bind(this,r)},t(i)("span",{class:"glyphicon glyphicon-remove"}))];if(r>0&&o.unshift(t(i)("button",{class:"btn btn-sm btn-default",key:this.id+"Up"+r,onclick:this.moveUpStop.bind(this,r)},t(i)("span",{class:"glyphicon glyphicon-arrow-up"}))),r<e.length-1){const n="btn btn-sm btn-default "+(r===e.length-1?"disabled":"");o.unshift(t(i)("button",{class:n,key:this.id+"Down"+r,disabled:r===e.length-1,onclick:this.moveDownStop.bind(this,r)},t(i)("span",{class:"glyphicon glyphicon-arrow-down"})))}return t(i)("div",{class:"input-group color-group"},t(i)("input",{class:"form-control input-sm color",type:"color",id:this.id+r,key:this.id+r,oninput:t(i).withAttr("value",this.updateIndex.bind(this,r)),value:this.stringToHex(n)}),t(i)("span",{class:"input-group-btn"},o))})):[super.init()],t(i)("div",{class:"gradient"},n,t(i)("button",{class:"btn-block btn btn-sm btn-default",key:this.id+"Add",onclick:this.addStop.bind(this)},t(i)("span",{class:"glyphicon glyphicon-plus"}),"Add Color"))}moveUpStop(t){if(0===t)return;const e=this.parent.style[this.id],n=e[t];e[t]=e[t-1],e[t-1]=n,this.update(e)}moveDownStop(t){const e=this.parent.style[this.id];if(t===e.length-1)return;const n=e[t];e[t]=e[t+1],e[t+1]=n,this.update(e)}removeStop(t){let e=this.parent.style[this.id];e.splice(t,1),1===e.length&&(e=e[0]),this.update(e)}updateIndex(t,e){this.parent.style[this.id][t]=this.hexToString(e),this.update(this.parent.style[this.id])}addStop(){let e=this.parent.style[this.id];Array.isArray(e)||(e=[e]),e.push("#000000"),e=e.map((t=>this.hexToString(t))),this.update(e),t(i).redraw()}}class l extends n{constructor(t){super(t),this.step=t.attrs.step||1,this.min=t.attrs.min,this.max=t.attrs.max}init(){return t(i)("input",{class:"form-control input-sm number",type:"number",id:this.id,key:this.id,step:this.step,min:this.min,max:this.max,oninput:t(i).withAttr("value",this.update,this),value:this.parent.style[this.id]})}}class c extends n{constructor(e){super(e),this.options=e.attrs.options.map((e=>{let n=e;return Array.isArray(e)&&(n=e[1],e=String(e[0])),t(i)("option",{value:e},n)}))}init(){return t(i)("select",{class:"form-control input-sm",id:this.id,key:this.key,oninput:t(i).withAttr("value",this.update,this),value:this.parent.style[this.id]},this.options)}}class d extends n{constructor(t){super(t),this.step=t.attrs.step||1,this.min=t.attrs.min,this.max=t.attrs.max}init(){const e=this.parent.style[this.id];let n;return n=Array.isArray(e)?e.map(((e,n)=>{let r=[t(i)("button",{class:"btn btn-sm btn-default",key:this.id+"Remove"+n,onclick:this.removeStop.bind(this,n)},t(i)("span",{class:"glyphicon glyphicon-remove"}))];return t(i)("div",{class:"input-group color-group"},t(i)("input",{class:"form-control input-sm number",type:"number",id:this.id+n,key:this.id+n,oninput:t(i).withAttr("value",this.updateIndex.bind(this,n)),step:this.step,min:this.min,max:this.max,value:e}),t(i)("span",{class:"input-group-btn"},r))})):[],t(i)("div",{class:"gradient"},n,t(i)("button",{class:"btn-block btn btn-sm btn-default",key:this.id+"Add",onclick:this.addStop.bind(this)},t(i)("span",{class:"glyphicon glyphicon-plus"}),"Add Stop Point"))}removeStop(t){let e=this.parent.style[this.id];e.splice(t,1),this.update(e.slice())}updateIndex(t,e){this.parent.style[this.id][t]=e,this.update(this.parent.style[this.id].slice())}addStop(){let e=this.parent.style[this.id];Array.isArray(e)||(e=[e]),e.push(e[e.length-1]||0),this.update(e),t(i).redraw()}}class u{static get PREFIX(){return"lf_"}static get DEFAULT(){return"Arial"}constructor(t){this._loading=!1,this.onrender=t.attrs.onrender,this.text=t.attrs.text,this.initialize()}initialize(){Object.keys(localStorage).filter((t=>t.indexOf(u.PREFIX)>-1)).forEach((t=>{const e=t.split(u.PREFIX)[1];this.addFont(e,localStorage.getItem(t),!0)}))}onLoadFont(t,e){if(this._loading)return;this._loading=!0;const n=t.target.files[0],i=n.name.split(".")[0],r=new FileReader;r.onload=t=>{this.addToLocalStorage(u.PREFIX+i,t.target.result),this.addFont(i,t.target.result,e)},r.readAsDataURL(n),t.target.value=""}addToLocalStorage(t,e){try{localStorage.setItem(t,e)}catch(t){alert("addToLocalStorage failed. Your local storage is full or your font exceeds the limit!\nThe fonts will NOT BE SAVED in your local cache.")}}addFont(e,n,r){new FontFace(e,"url("+n+")",{style:"normal",weight:700}).load().then((n=>{document.fonts.add(n);const o=document.getElementById("fontFamily"),a=document.createElement("option");a.text=e,a.value=e,o.add(a),r||(this.text.style.fontFamily=e),this.text.updateText(),t(i).redraw(),this.onrender(),this._loading=!1})).catch((function(t){alert("addFont failed. Maybe the font you are trying to load is too big?\n"+t),this._loading=!1}))}clearFonts(){Object.keys(localStorage).filter((t=>t.indexOf(u.PREFIX)>-1)).forEach((t=>{const e=t.split(u.PREFIX)[1],n=document.getElementById("fontFamily"),i=n.querySelector("option[value="+e+"]");n.removeChild(i),localStorage.removeItem(t)})),this.text.style.fontFamily=u.DEFAULT,t(i).redraw(),this.onrender()}view(){return t(i)("div",{class:"row font-loader"},t(i)("label",{class:"col-xs-5"}),t(i)("div",{class:"col-xs-7"},t(i)("div",{class:"btn-group btn-group-xs btn-group-full"},t(i)("button",{title:"Add local custom fonts",class:"btn btn-primary btn-file"},t(i)("span",{class:"glyphicon glyphicon-open"}),t(i)("input",{type:"file",onchange:this.onLoadFont.bind(this)}),t(i)("small",null," Add")),t(i)("button",{title:"Clear all customs fonts",class:"btn btn-primary",onclick:this.clearFonts.bind(this)},t(i)("span",{class:"glyphicon glyphicon-erase"}),t(i)("small",null," Clear")))))}}class h{constructor(t){this.parent=t.attrs.parent,this.onclose=t.attrs.onclose,this._saving=!1,this.format=localStorage.snapFormat||"png",this.alpha=localStorage.snapAlpha||"1"}onSave(){if(this._saving)return;this._saving=!0;const{text:t,style:e,background:n,app:i}=this.parent,r=new PIXI.Container,o=new PIXI.Sprite(PIXI.Texture.WHITE),a=new PIXI.Text(t._text,e);o.anchor.set(.5),o.scale.set(a.width/o.width,a.height/o.height),o.tint=parseInt(n.replace("#",""),16),o.alpha=parseInt(this.alpha),a.anchor.set(.5),r.addChild(o,a);const s=i.renderer.generateTexture(r);r.destroy(!0);const l=new PIXI.Sprite(s);i.renderer.extract.canvas(l).toBlob((t=>{const e=window.URL||window.webkitURL||URL,n=document.createElement("a");n.href=e.createObjectURL(t),n.download=a.text.substring(0,24)+"."+this.format,document.body.append(n),n.click(),n.remove(),l.destroy(!0),this._saving=!1}),"image/"+this.format)}onFormat(e){this.format=e.currentTarget.value,localStorage.setItem("snapFormat",this.format),t(i).redraw()}onAlpha(e){this.alpha=e.currentTarget.value,localStorage.setItem("snapAlpha",this.alpha),t(i).redraw()}view(){return t(i)("div",{class:"well"},t(i)("div",{class:"row config"},t(i)("label",{class:"col-md-3 col-sm-4"},t(i)("span",{class:"glyphicon glyphicon-picture"}),t(i)("span",{class:"name"},"Format")),t(i)("div",{class:"col-md-9 col-sm-8"},t(i)("select",{class:"form-control input-sm",onchange:this.onFormat.bind(this),value:this.format},t(i)("option",{value:"png"},"PNG"),t(i)("option",{value:"jpg"},"JPG")))),t(i)("div",{class:"row config"},t(i)("label",{class:"col-md-3 col-sm-4"},t(i)("span",{class:"glyphicon glyphicon-adjust"}),t(i)("span",{class:"name"},"Background")),t(i)("div",{class:"col-md-9 col-sm-8"},t(i)("select",{class:"form-control input-sm",onchange:this.onAlpha.bind(this),value:this.alpha},t(i)("option",{value:"0"},"0% (hidden)"),t(i)("option",{value:"0.1"},"10%"),t(i)("option",{value:"0.2"},"20%"),t(i)("option",{value:"0.3"},"30%"),t(i)("option",{value:"0.4"},"40%"),t(i)("option",{value:"0.5"},"50%"),t(i)("option",{value:"0.6"},"60%"),t(i)("option",{value:"0.7"},"70%"),t(i)("option",{value:"0.8"},"80%"),t(i)("option",{value:"0.9"},"90%"),t(i)("option",{value:"1"},"100% (visible)")))),t(i)("div",{class:"row config"},t(i)("div",{class:"col-md-10 col-sm-9 col-md-offset-2 col-sm-offset-3"},t(i)("div",{class:"btn-group pull-right"},t(i)("button",{class:"btn btn-primary",onclick:this.onSave.bind(this)},t(i)("span",{class:"glyphicon glyphicon-save"})," Download"),t(i)("button",{class:"btn btn-default",onclick:this.onclose},t(i)("span",{class:"glyphicon glyphicon-remove"})," Close")))))}}class p{constructor(t){this.id=`panel-${t.attrs.id}`,this.name=t.attrs.name;const e=localStorage[this.id];this.selected=void 0!==e?JSON.parse(e):!!t.attrs.selected}onclick(){this.selected=!this.selected,localStorage[this.id]=JSON.stringify(this.selected)}view(t){const e=this.selected?"expanded":"collapsed",n=this.selected?"pane visible":"pane hidden";return m("div",null,m("h4",{class:e,onclick:this.onclick.bind(this)},this.name),m("div",{class:n},t.children))}}function f(t,e){for(const n in e)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}function v(t,e){if(t===e)return!0;if(typeof t!=typeof e||null===t||null===e||"object"!=typeof t||"object"!=typeof e)return!1;let n=0,i=0;for(const e in t)++n;for(const n in e)if(++i,!(n in t)||!v(t[n],e[n]))return!1;return n===i}class g{constructor(){this.defaults=new PIXI.TextStyle,this.defaultText="Hello World",this.defaultBG="#ffffff",this.style=new PIXI.TextStyle,this.defaults.dropShadowColor="black",this.style.dropShadowColor="black",this.text=new PIXI.Text("",this.style),this.text.anchor.set(.5),this.indent=parseInt(localStorage.indent)||g.INDENT.SPACE_4,this._snapOptions=!!localStorage.snapOptions;let t={text:localStorage.text||this.defaultText,background:localStorage.background||this.defaultBG,style:JSON.parse(localStorage.style||null)||this.defaults.toJSON()};if(document.location.hash)try{const e=document.location.hash.slice(1);t=Object.assign(t,JSON.parse(decodeURIComponent(e)))}catch(t){}PIXI.settings.ROUND_PIXELS=!0,this.app=new PIXI.Application({width:400,height:100,resolution:devicePixelRatio}),f(this.style,t.style),this.text.text=t.text,this.background=t.background,this.app.stage.addChild(this.text),this.app.stop()}view(){const e=this.codeColor.bind(this);return t(i)("div",{oncreate:this.init.bind(this)},t(i)("nav",{class:"controls"},t(i)("div",{class:"container-fluid"},t(i)("h3",{class:"title"},"PixiJS TextStyle",t(i)("button",{class:"btn btn-primary btn-sm pull-right",onclick:this.reset.bind(this)},t(i)("span",{class:"glyphicon glyphicon-refresh"}))),t(i)(p,{id:"text",name:"Text",selected:"true"},t(i)("textarea",{class:"form-control",id:"input",autofocus:"true",oninput:t(i).withAttr("value",this.onText.bind(this)),value:this.text.text})),t(i)(p,{id:"font",name:"Font",selected:"true"},t(i)(c,{parent:this,id:"fontFamily",name:"Font Family",options:["Arial","Arial Black","Comic Sans MS","Courier New","Georgia","Helvetica","Impact","Tahoma","Times New Roman","Verdana","Georgia, serif",'"Palatino Linotype", "Book Antiqua", Palatino, serif','"Times New Roman", Times, serif',"Arial, Helvetica, sans-serif",'"Arial Black", Gadget, sans-serif','"Comic Sans MS", cursive, sans-serif',"Impact, Charcoal, sans-serif",'"Lucida Sans Unicode", "Lucida Grande", sans-serif',"Tahoma, Geneva, sans-serif",'"Trebuchet MS", Helvetica, sans-serif',"Verdana, Geneva, sans-serif",'"Courier New", Courier, monospace','"Lucida Console", Monaco, monospace']}),t(i)(u,{onrender:()=>this.app.render(),text:this.text}),t(i)(l,{parent:this,id:"fontSize",name:"Font Size",step:"1",min:"1"}),t(i)(c,{parent:this,id:"fontStyle",name:"Font Style",options:["normal","italic","oblique"]}),t(i)(c,{parent:this,id:"fontVariant",name:"Font Variant",options:["normal","small-caps"]}),t(i)(c,{parent:this,id:"fontWeight",name:"Font Weight",options:["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]})),t(i)(p,{id:"fill",name:"Fill"},t(i)(s,{parent:this,id:"fill",name:"Color"}),t(i)(c,{parent:this,id:"fillGradientType",name:"Gradient Type",options:[[0,"linear vertical"],[1,"linear horizontal"]]}),t(i)(d,{parent:this,id:"fillGradientStops",name:"Fill Gradient Stops",step:"0.1",min:"0",max:"1"})),t(i)(p,{id:"stroke",name:"Stroke"},t(i)(a,{parent:this,id:"stroke",name:"Color"}),t(i)(l,{parent:this,id:"strokeThickness",name:"Thickness",step:"1",min:"0"}),t(i)(c,{parent:this,id:"lineJoin",name:"Line Join",options:["miter","round","bevel"]}),t(i)(l,{parent:this,id:"miterLimit",name:"Miter Limit",step:"1",min:"0"})),t(i)(p,{id:"layout",name:"Layout"},t(i)(l,{parent:this,id:"letterSpacing",name:"Letter Spacing"}),t(i)(c,{parent:this,id:"textBaseline",name:"Text Baseline",options:["alphabetic","bottom","middle","top","hanging"]})),t(i)(p,{id:"shadow",name:"Drop Shadow"},t(i)(o,{parent:this,id:"dropShadow",name:"Enable"}),t(i)(a,{parent:this,id:"dropShadowColor",name:"Color"}),t(i)(l,{parent:this,id:"dropShadowAlpha",name:"Alpha",step:"0.1",min:"0",max:"1"}),t(i)(l,{parent:this,id:"dropShadowAngle",name:"Angle",step:"0.1"}),t(i)(l,{parent:this,id:"dropShadowBlur",name:"Blur"}),t(i)(l,{parent:this,id:"dropShadowDistance",name:"Distance"})),t(i)(p,{id:"multiline",name:"Multiline"},t(i)(o,{parent:this,id:"wordWrap",name:"Enable"}),t(i)(o,{parent:this,id:"breakWords",name:"Break Words"}),t(i)(c,{parent:this,id:"align",name:"Align",options:["left","center","right"]}),t(i)(c,{parent:this,id:"whiteSpace",name:"White Space",options:["normal","pre","pre-line"]}),t(i)(l,{parent:this,id:"wordWrapWidth",name:"Wrap Width",step:"10",min:"0"}),t(i)(l,{parent:this,id:"lineHeight",name:"Line Height",step:"1",min:"0"}),t(i)(l,{parent:this,id:"leading",name:"Leading",step:"1",min:"0"})),t(i)(p,{id:"texture",name:"Texture"},t(i)(l,{parent:this,id:"padding",name:"Padding"}),t(i)(o,{parent:this,id:"trim",name:"Trim"})),t(i)(p,{id:"background",name:"Background"},t(i)(r,{parent:this,id:"backgroundColor",name:"Color"})))),t(i)("main",{class:"main"},t(i)("div",{class:"col-sm-12"},t(i)("h3",null,t(i)("button",{class:"btn btn-primary btn-sm pull-right",onclick:this.onSnapToggle.bind(this)},t(i)("span",{class:"glyphicon glyphicon-camera"})," Snapshot"),t(i)("span",{class:"glyphicon glyphicon-eye-open"}),"Preview",t(i)("small",null,"PixiJS v",PIXI.VERSION)),t(i)("div",{class:"renderer",id:"renderer"}),this._snapOptions&&t(i)(h,{onclose:this.onSnapToggle.bind(this),parent:this})),t(i)("div",{class:"col-sm-6"},t(i)("h3",null,t(i)("span",{class:"glyphicon glyphicon-scissors"})," JavaScript"),t(i)("pre",{class:"code-display hljs"},t(i)("code",{class:"javascript",onupdate:e,oncreate:e,innerHTML:this.getCode()}))),t(i)("div",{class:"col-sm-6"},t(i)("h3",null,t(i)("span",{clasName:"glyphicon glyphicon-scissors"})," JSON",t(i)("span",{class:"btn-group pull-right"},t(i)("button",{class:"btn btn-primary btn-sm",onclick:this.onSave.bind(this)},t(i)("span",{class:"glyphicon glyphicon-save"})," Save"),t(i)("button",{class:"btn btn-primary btn-sm btn-file"},t(i)("span",{class:"glyphicon glyphicon-open"}),t(i)("input",{type:"file",onchange:this.onLoad.bind(this)})," Load"))),t(i)("pre",{class:"code-display hljs"},t(i)("code",{class:"json",onupdate:e,oncreate:e,innerHTML:this.getCode(!0)}))),t(i)("div",{class:"col-sm-12"},t(i)("h3",null,t(i)("span",{class:"glyphicon glyphicon-cog"})," Options"),t(i)("div",{class:"well"},t(i)("div",{class:"row config"},t(i)("label",{class:"col-md-2 col-sm-3"},t(i)("span",{class:"glyphicon glyphicon-indent-left"}),t(i)("span",{class:"name"},"Indent")),t(i)("div",{class:"col-md-10 col-sm-9"},t(i)("select",{class:"form-control input-sm",onchange:this.onFormat.bind(this),value:this.indent},t(i)("option",{value:g.INDENT.SPACE_4},"4 Spaces"),t(i)("option",{value:g.INDENT.SPACE_3},"3 Spaces"),t(i)("option",{value:g.INDENT.SPACE_2},"2 Spaces"),t(i)("option",{value:g.INDENT.TAB},"Tab"),t(i)("option",{value:g.INDENT.NONE},"No indent"),t(i)("option",{value:g.INDENT.NONE_PRETTY},"No indent (with spaces)")))))),t(i)("div",{class:"col-sm-12"},t(i)("h3",null,t(i)("span",{class:"glyphicon glyphicon-book"})," Documentation"),t(i)("ul",null,t(i)("li",null,t(i)("a",{href:"//pixijs.download/release/docs/PIXI.TextStyle.html"},"PIXI.TextStyle")),t(i)("li",null,t(i)("a",{href:"//pixijs.download/release/docs/PIXI.Text.html"},"PIXI.Text")),t(i)("li",null,t(i)("a",{href:"//pixijs.download/release/docs/PIXI.TextMetrics.html"},"PIXI.TextMetrics"))))))}onFormat(e){this.indent=parseInt(e.target.value),localStorage.indent=this.indent,t(i).redraw()}onLoad(e){const n=e.target;if(1!==n.files.length)return;if(!/\.json$/.test(n.files[0].name))return void alert("Unable to load, must be a JSON file.");const r=new FileReader;r.onload=()=>{try{const e=JSON.parse(r.result);f(this.style,this.defaults.toJSON()),f(this.style,e),t(i).redraw(),this.app.render()}catch(t){alert("Unable to parse JSON file")}},r.readAsText(n.files[0]),e.target.value=""}onSave(){const t=this.style.toJSON();for(const e in t)v(t[e],this.defaults[e])&&delete t[e];const e=JSON.stringify(t,null,this.getIndent()),n=new Blob([e],{type:"text/plain;charset=utf-8"});saveAs(n,"style.json")}reset(){confirm("Are you sure you want to remove all your saved styles?")&&(localStorage.removeItem("background"),localStorage.removeItem("style"),localStorage.removeItem("text"),f(this.style,this.defaults.toJSON()),this.text.text=this.defaultText,this.background=this.defaultBG,t(i).redraw(),this.app.render())}onSnapToggle(){this._snapOptions=!this._snapOptions,this._snapOptions?localStorage.setItem("snapOptions","1"):localStorage.removeItem("snapOptions"),t(i).redraw()}set background(t){localStorage.setItem("background",t),this.app.renderer.backgroundColor=parseInt(t.slice(1),16)}get background(){const t=this.app.renderer.backgroundColor.toString(16);return"#"+"0".repeat(6-t.length)+t}resize(){const t=this.app.view,e=t.parentNode.clientWidth,n=t.parentNode.clientHeight;this.app.renderer.resize(e,n),this.text.x=e/2,this.text.y=n/2,this.app.render()}codeColor(t){hljs.highlightBlock(t.dom)}getIndent(){let t;switch(this.indent){case g.INDENT.SPACE_4:t="    ";break;case g.INDENT.SPACE_3:t="   ";break;case g.INDENT.SPACE_2:t="  ";break;case g.INDENT.TAB:t="\t";break;default:t=""}return t}getCode(t){const e=this.style.toJSON();for(const t in e)v(e[t],this.defaults[t])&&delete e[t];const n=this.getIndent(),i=g.INDENT.NONE_PRETTY===this.indent;let r=JSON.stringify(e,null,n);if(t)return i?this.prettify(r):r;let o=JSON.stringify(e);localStorage.setItem("style",o);const a={};"{}"!==o&&(a.style=e),this.defaultText!==this.text.text&&(a.text=this.text.text),this.defaultBG!==this.background&&(a.background=this.background);const s=Object.keys(a).length?encodeURIComponent(JSON.stringify(a)):"";history.replaceState(null,null,`#${s}`),"{}"===r?r="":(r=r.replace(/"([^"]+)":/g,"$1:").replace(/"/g,"'").replace(/'/g,'"'),i&&(r=this.prettify(r)));return`const style = new PIXI.TextStyle(${r});\nconst text = new PIXI.Text('${this.text.text.replace(/\n/g,"\\n").replace(/'/g,"\\'")}', style);`}prettify(t){return t.replace(/([{:,])/g,"$1 ").replace(/}$/," }")}onText(t){localStorage.setItem("text",t),this.text.text=t,this.app.render()}init(){document.getElementById("renderer").appendChild(this.app.view),this.app.render(),this.resize(),window.addEventListener("resize",this.resize.bind(this),!1)}}g.INDENT={NONE:1,NONE_PRETTY:2,TAB:3,SPACE_4:4,SPACE_3:5,SPACE_2:6},window.addEventListener("load",(function(){t(i).mount(document.body,g)}));
//# sourceMappingURL=index.8009f5f8.js.map
